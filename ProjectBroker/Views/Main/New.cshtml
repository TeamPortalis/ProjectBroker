@model ProjectBroker.Models.ViewModels.NewProjectViewModel
@{
    ViewBag.Title = "New Project";
}



<div class="wizard2" data-role="wizard2" data-button-labels="{help: ?, prev:<span class='mif-arrow-left'></span>;, next: <span class='mif-arrow-right'></span>, finish: <span class='mif-checkmark'></span>}"
    style="background-color: #cacaca; width:50%; margin: auto;" data-on-help="helpNotif();" data-on-finish="submitNewProject();">

    <div class="step active">
        <div class="step-content">
            Enter project-name:<br />
            <div class="input-control text" style="width: 100%;">
                <input id="pNameTF" type="text" placeholder="Project-name ..." />
            </div><br />
            Enter project-description:<br />
            <div class="input-control textarea" style="width: 100%;">
                <textarea id="pDescTF" style="resize: none;">
                </textarea>
            </div>
        </div>
    </div>
    <div class="step next">
        <div class="step-content">
            Choose your file-hosting environment:<br />
            <div class="input-control select">
                <select id="selectPHE">
    @foreach(var i in Model.AllProjectHostingEnvs)
    {
        
        @if(Model.AllProjectHostingEnvs.First().phs_id == i.phs_id)
        {
            <option value="@i.phs_id" selected>@i.phs_name</option>
        }
        else
        {
            <option value="@i.phs_id" >@i.phs_name</option>
        }

    }
                </select>
            </div>
        </div>
    </div>
    <div class="step next">
        <div class="step-content">
            Choose your project-management environment:<br />
            <div class="input-control select">
                <select id="selectPME">
                    @foreach(var i in Model.AllProjectManagementEnvs)
                    {
                        if(Model.AllProjectManagementEnvs.First().pms_id == i.pms_id)
                        {
                            <option value="@i.pms_id" selected>@i.pms_name</option>
                        }
                        else
                        {
                            <option value="@i.pms_id">@i.pms_name</option>
                        }
                    }
                </select>
            </div>
        </div>
    </div>
    <div class="step next">
        <div class="step-content">
            <select id="teamSelectorId"></select>
            @if(Model.AllTeams.Count() == 0)
            {
                <option value="$NoTeam$" selected>Create New Team</option>
            } 
        </div>
    </div>
    <div class="action-bar next">
        <button class="button cycle-button medium-button wiz-btn-help place-left">?</button>
        <button class="button cycle-button medium-button wiz-btn-finish place-right" style="display: none;" onclick="submitNewProject();"><span class="mif-checkmark"></span></button>
        <button class="button cycle-button medium-button wiz-btn-next place-right"><span class="mif-arrow-right"></span></button>
        <button class="button cycle-button medium-button wiz-btn-prev place-right" style="display: none;"><span class="mif-arrow-left"></span></button>
    </div>

</div>

@using (Html.BeginForm("New", "Main", FormMethod.Post, new { id = "formHelper" }))
{
    @Html.AntiForgeryToken()
}


<script>
    function helpNotif()
    {
        $.Notify({
            caption: 'Help',
            content: 'With this wizard you can create a new project! Please follow the instructions described on the current step and click on next, until you are at the last step and click finish once done.',
            keepOpen: true
        });
    }

    function submitNewProject() {

        var projectName = document.createElement("INPUT");
        projectName.setAttribute("type", "hidden");
        projectName.setAttribute("name", "pr_name_get");
        var pNameValue = document.getElementById("pNameTF").value;
        projectName.setAttribute("value", pNameValue);

        var projectDesc = document.createElement("INPUT");
        projectDesc.setAttribute("type", "hidden");
        projectDesc.setAttribute("name", "pr_desc_get");
        var pDescValue = document.getElementById("pDescTF").value;
        projectDesc.setAttribute("value", pDescValue);

        var form = document.getElementById("formHelper");
        form.appendChild(projectName);
        form.appendChild(projectDesc);

        form.submit();


    }
    
</script>